T.cache("X.Converter.Date",["K"],function(k){var h=K.entity(k.pkg),j=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,
19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],l=["\u521d","\u5341","\u5eff",
"\u5345","\u25a1"],m=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"],n=["\u6b63","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u51ac","\u814a"],o=["\u5e9a","\u8f9b","\u58ec","\u7678","\u7532","\u4e59","\u4e19","\u4e01","\u620a","\u5df1"],p=["\u7533","\u9149","\u620c","\u4ea5","\u5b50","\u4e11","\u5bc5","\u536f","\u8fb0","\u5df3","\u5348","\u672a"];h.Date=K.clazz({ctor:function(){var a=new Date,b=h.Date.solarDateToLunar(a.getFullYear(),
a.getMonth()+1,a.getDate());K.mix(this,{sYear:a.getFullYear(),sMonth:a.getMonth()+1,sDay:a.getDate(),lYear:b.year,lMonth:b.month,lDay:b.day,monthIsLeap:b.monthIsLeap})},syncByLunar:function(){var a=this,b=h.Date.lunarDateToSolar(a.lYear,a.lMonth,a.lDay,a.monthIsLeap);a.sYear=b.year;a.sMonth=b.month;a.sDay=b.day},syncBySolar:function(){var a=this,b=h.Date.solarDateToLunar(a.sYear,a.sMonth,a.sDay);a.lYear=b.year;a.lMonth=b.month;a.lDay=b.day;a.monthIsLeap=b.monthIsLeap},checkSDay:function(){var a=this,
b;b=h.Date.solarDaysOfMonth(a.sYear,a.sMonth);if(b<a.sDay)a.sDay=b},checkLDay:function(){var a=this,b;if((b=a.monthIsLeap?h.Date.lunarDaysOfLeapMonth(a.lYear,a.lMonth):h.Date.lunarDaysOfMonth(a.lYear,a.lMonth))&&b<a.lDay)a.lDay=b},sgSYear:function(a,b){var c=this;if(a){c.sYear=a;c.checkSDay();b&&c.syncBySolar()}return c.sYear},sgLYear:function(a,b){var c=this;if(a){c.lYear=a;c.checkLDay();b&&c.syncByLunar()}return c.lYear},sgSMonth:function(a,b){var c=this;if(a){c.sMonth=a;c.checkSDay();b&&c.syncBySolar()}return c.sMonth},
sgLMonth:function(a,b){var c=this;if(a){c.lMonth=a;c.checkLDay();b&&c.syncByLunar()}return c.lMonth},sgSDay:function(a,b){var c=this;if(a){c.sDay=a;c.checkSDay();b&&c.syncBySolar()}return c.sDay},sgLDay:function(a,b){var c=this;if(a){c.lDay=a;c.checkLDay();b&&c.syncByLunar()}return c.lDay},sgLMonthIsLeap:function(a,b){var c=this;if(a!==undefined){c.monthIsLeap=!!a;c.checkLDay();b&&c.syncByLunar()}return c.monthIsLeap},getLunarDate:function(){var a=this;return{year:a.lYear,yearText:h.Date.lunarYearToText(a.lYear),
month:a.lMonth,monthText:h.Date.lunarMonthToText(a.lMonth,a.monthIsLeap),day:a.lDay,dayText:h.Date.lunarDayToText(a.lDay),monthIsLeap:a.monthIsLeap}},getSolarDate:function(){var a=this;return{year:a.sYear,month:a.sMonth,day:a.sDay}},getDate:function(){return{solar:this.getSolarDate(),lunar:this.getLunarDate()}}});K.mix(h.Date,{solarDateToLunar:function(a,b,c){var e=this,d={},f=0,g=0;f=new Date(a,b-1,c);c=(Date.UTC(f.getFullYear(),f.getMonth(),f.getDate())-Date.UTC(1900,0,31))/864E5;b=14;for(a=1900;a<
2050&&c>0;a++){g=e.lunarDaysOfYear(a);c-=g;b+=12}if(c<0){c+=g;a--;b-=12}d.year=a;f=e.lunarLeapMonthOfYear(a);d.monthIsLeap=false;for(a=1;a<13&&c>0;a++){if(f>0&&a==f+1&&d.monthIsLeap==false){--a;d.monthIsLeap=true;g=e.lunarDaysOfLeapMonth(d.year)}else g=e.lunarDaysOfMonth(d.year,a);if(d.monthIsLeap==true&&a==f+1)d.monthIsLeap=false;c-=g;d.monthIsLeap==false&&b++}if(c==0&&f>0&&a==f+1)if(d.monthIsLeap)d.monthIsLeap=false;else{d.monthIsLeap=true;--a;--b}if(c<0){c+=g;--a;--b}d.month=a;d.day=c+1;d.yearText=
e.lunarYearToText(d.year);d.monthText=e.lunarMonthToText(d.month,d.monthIsLeap);d.dayText=e.lunarDayToText(d.day);return d},lunarDateToSolar:function(a,b,c,e){for(var d=this,f=d.lunarLeapMonthOfYear(a),g=0,i=1900;i<a;i++)g+=d.lunarDaysOfYear(i);if(b>f)g+=d.lunarDaysOfLeapMonth(a);else e&&b==f&&b++;for(i=1;i<b;i++)g+=d.lunarDaysOfMonth(a,i);g+=c-1;a=new Date(g*864E5+ +new Date(1900,0,31));return{year:a.getFullYear(),day:a.getDate(),month:a.getMonth()+1}},lunarDaysOfYear:function(a){var b,c=348;for(b=
32768;b>8;b>>=1)c+=j[a-1900]&b?1:0;return c+this.lunarDaysOfLeapMonth(a)},lunarLeapMonthOfYear:function(a){return j[a-1900]&15},lunarDaysOfLeapMonth:function(a){return this.lunarLeapMonthOfYear(a)?j[a-1900]&65536?30:29:0},lunarDaysOfMonth:function(a,b){return j[a-1900]&65536>>b?30:29},solarYearIsLeap:function(a){return a%4==0&&a%100!=0||a%400==0},solarDaysOfMonth:function(a,b){var c=this;if(b==2)return c.solarYearIsLeap(a)?29:28;if(b<=7&&b%2==1||b>=8&&b%2==0)return 31;return 30},lunarDayToText:function(a){var b=
Math.floor(a/10);if(a=a%10)return l[b]+m[a];return["","\u521d\u5341","\u4e8c\u5341","\u4e09\u5341"][b]},lunarMonthToText:function(a,b){return(b?"\u95f0":"")+n[a-1]+"\u6708"},lunarYearToText:function(a){return o[(a+"").charAt(3)]+p[a%12]+"\u5e74("+a+")"},lunarYearsToTextList:function(a,b){var c=[],e=this;a=a||1980;b=b||2049;for(a=a;a<=b;a++)c.push({text:e.lunarYearToText(a),value:a});return c},lunarDaysToTextList:function(a,b,c){var e=this;b=e.lunarDaysOfMonth(a,b);var d=[];if(c)b=e.lunarDaysOfLeapMonth(a);
for(a=1;a<=b;a++)d.push({text:e.lunarDayToText(a),value:a});return d},lunarMonthsToTextList:function(a,b,c){var e=this;a=e.lunarLeapMonthOfYear(a);var d=[];b=b||1;c=c||12;for(b=b;b<=c;b++){d.push({text:e.lunarMonthToText(b),value:b,isLeap:false});b==a&&d.push({text:e.lunarMonthToText(b,true),value:b,isLeap:true})}return d},solarDaysToTextList:function(a,b){var c=this;a=c.solarDaysOfMonth(a,b);b=[];for(c=1;c<=a;c++)b.push({text:c,value:c});return b},solarMonthsToTextList:function(){for(var a=[],b=
1;b<=12;b++)a.push({text:b,value:b});return a}})});
