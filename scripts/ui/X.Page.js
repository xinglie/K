T.cache("X.Page","K",function(l){var m=K.entity(l.pkg),h=window;l=h.document;var n=l.body,o={},p=/^(?:checkbox|radio)$/i;function j(e){var b=h.document,f=h,a=m.Page,d;K.isArr(e)||(e=[e]);for(var i=0;i<e.length;i++){d=e[i];if(!T.has(o,d)){o[d]=true;switch(d){case a.WIN_SCROLL:K.on(h,"scroll",function(){h.clearTimeout(j.scrollTimer);j.scrollTimer=h.setTimeout(function(){a.fire(a.WIN_SCROLL)},50)});break;case a.WIN_RESIZE:K.on(h,"resize",function(){var c=j;h.clearTimeout(c.resizeTimer);c.resizeTimer=
h.setTimeout(function(){a.fire(a.WIN_RESIZE)},50)});break;case a.POINTER_DOWN:K.on(b,["mousedown","touchstart"],function(c){c=K.evt(c,f);a.fire(a.POINTER_DOWN,{srcEvent:c})});break;case a.POINTER_UP:K.on(b,["mouseup","touchend"],function(c){c=K.evt(c,f);a.fire(a.POINTER_UP,{srcEvent:c})});break;case a.POINTER_CLICK:K.on(b,["click"],function(c){c=K.evt(c,f);a.fire(a.POINTER_CLICK,{srcEvent:c})});break;case a.PINTER_MOVE:K.on(b,["mousemove","touchmove"],function(c){c=K.evt(c,f);a.fire(a.PINTER_MOVE,
{srcEvent:c})});break;case a.POINTER_WHEEL:K.on(b,["mousewheel","DOMMouseScroll"],function(c){c=K.evt(c,f);a.fire(a.POINTER_WHEEL,{srcEvent:c})});break;default:T.error("unsupport event:"+d)}}}}m.Page=K.mix({POINTER_CLICK:"_pointer_click",PINTER_MOVE:"_pointer_move",POINTER_UP:"_pointer_up",POINTER_DOWN:"_pointerdown",WIN_RESIZE:"_win_resize",WIN_SCROLL:"_win_scroll",POINTER_WHEEL:"_pointer_wheel",on:function(e){j(e);K.ME.on.apply(this,arguments)},scrollToXY:function(e,b,f){var a=this,d,i;if(!a.$sfx){d=
"X.ALG.Tween";T.use(d);d=K.access(h,d,{});a.$sfx=new K.FX(d.easeOutStrong);i=[a.POINTER_DOWN,a.POINTER_WHEEL,a.WIN_RESIZE];a.$sfx.pointerDown=function(){a.$sfx.stop(true);a.un(i,a.$sfx.pointerDown);delete a.$sfx};a.on(i,a.$sfx.pointerDown);a.$sfx.on_end=function(){a.$sfx.pointerDown();K.isFn(f)&&f()}}a.$sfx.stop(true);var c=K.body();d=Math.abs(c.scrollX-e);var g=Math.abs(c.scrollY-b);d=Math.min(d,g,2E3);a.$sfx.run(d,function(k){window.scrollTo(k(c.scrollX,e),k(c.scrollY,b))})},scrollToNode:function(e,
b){b=K.mix({offsetX:0,offsetY:0,anchorTop:true,anchorLeft:true},b);(e=K(e))||T.error("unfound:"+e);var f=K.nodeBound(e),a=K.body();e=this;var d;d=b.anchorLeft?f.x+b.offsetX:f.x-a.width+f.width+b.offsetX;b=b.anchorTop?f.y+b.offsetY:f.y-a.height+f.height+b.offsetY;T.log(d,b);e.scrollToXY(d,b)},download:function(e){var b=K("iframe",{id:K.guid()},{left:-1000,top:-1000,position:"absolute"});function f(){setTimeout(function(){T.log("loaded");K.un(b,"load",f);K.nodeDel(b);T.log(b.parentNode);b=null},1E3)}
K.on(b,"load",f);b.src=e;n.insertBefore(b,n.firstChild)},serialize:function(e,b){K(e);var f={},a=[],d;function i(g,k){if(g.name){f[g.name]||(f[g.name]=[]);if(k&&p.test(g.type)){if(g.checked){d={node:g,value:K.strCode(g.value),name:g.name};K.isFn(b)&&b(d);d.ignore||f[g.name].push(d.value)}}else{d={node:g,value:K.strCode(g.value),name:g.name};K.isFn(b)&&b(d);d.ignore||f[g.name].push(d.value)}}}K.nodeByTag(["input","select","textarea"],e,i);for(var c in f)for(e=0;e<f[c].length;e++)a.push(c+"="+f[c][e]);
return a.join("&")}},K.ME,{on:true})});
